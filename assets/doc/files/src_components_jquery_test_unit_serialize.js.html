<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/components/jquery/test/unit/serialize.js - lavaca</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="lavaca"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 2.3.2</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/lavaca.env.Device.html">lavaca.env.Device</a></li>
            
                <li><a href="../classes/lavaca.events.EventDispatcher.html">lavaca.events.EventDispatcher</a></li>
            
                <li><a href="../classes/lavaca.fx.Animation.html">lavaca.fx.Animation</a></li>
            
                <li><a href="../classes/lavaca.fx.Spring.html">lavaca.fx.Spring</a></li>
            
                <li><a href="../classes/lavaca.fx.Transform.html">lavaca.fx.Transform</a></li>
            
                <li><a href="../classes/lavaca.fx.Transition.html">lavaca.fx.Transition</a></li>
            
                <li><a href="../classes/lavaca.mvc.Application.html">lavaca.mvc.Application</a></li>
            
                <li><a href="../classes/lavaca.mvc.AttributeEvent.html">lavaca.mvc.AttributeEvent</a></li>
            
                <li><a href="../classes/lavaca.mvc.Collection.html">lavaca.mvc.Collection</a></li>
            
                <li><a href="../classes/lavaca.mvc.Controller.html">lavaca.mvc.Controller</a></li>
            
                <li><a href="../classes/lavaca.mvc.ItemEvent.html">lavaca.mvc.ItemEvent</a></li>
            
                <li><a href="../classes/lavaca.mvc.Model.html">lavaca.mvc.Model</a></li>
            
                <li><a href="../classes/lavaca.mvc.Route.html">lavaca.mvc.Route</a></li>
            
                <li><a href="../classes/lavaca.mvc.Router.html">lavaca.mvc.Router</a></li>
            
                <li><a href="../classes/lavaca.mvc.View.html">lavaca.mvc.View</a></li>
            
                <li><a href="../classes/lavaca.mvc.ViewManager.html">lavaca.mvc.ViewManager</a></li>
            
                <li><a href="../classes/lavaca.net.Connectivity.html">lavaca.net.Connectivity</a></li>
            
                <li><a href="../classes/lavaca.net.History.html">lavaca.net.History</a></li>
            
                <li><a href="../classes/lavaca.storage.LocalStore.html">lavaca.storage.LocalStore</a></li>
            
                <li><a href="../classes/lavaca.storage.Store.html">lavaca.storage.Store</a></li>
            
                <li><a href="../classes/lavaca.ui.DustTemplate.html">lavaca.ui.DustTemplate</a></li>
            
                <li><a href="../classes/lavaca.ui.Form.html">lavaca.ui.Form</a></li>
            
                <li><a href="../classes/lavaca.ui.LoadingIndicator.html">lavaca.ui.LoadingIndicator</a></li>
            
                <li><a href="../classes/lavaca.ui.Template.html">lavaca.ui.Template</a></li>
            
                <li><a href="../classes/lavaca.ui.Widget.html">lavaca.ui.Widget</a></li>
            
                <li><a href="../classes/lavaca.util.ArrayUtils.html">lavaca.util.ArrayUtils</a></li>
            
                <li><a href="../classes/lavaca.util.Cache.html">lavaca.util.Cache</a></li>
            
                <li><a href="../classes/lavaca.util.Config.html">lavaca.util.Config</a></li>
            
                <li><a href="../classes/lavaca.util.DateUtils.html">lavaca.util.DateUtils</a></li>
            
                <li><a href="../classes/lavaca.util.Disposable.html">lavaca.util.Disposable</a></li>
            
                <li><a href="../classes/lavaca.util.extend.html">lavaca.util.extend</a></li>
            
                <li><a href="../classes/lavaca.util.Map.html">lavaca.util.Map</a></li>
            
                <li><a href="../classes/lavaca.util.Promise.html">lavaca.util.Promise</a></li>
            
                <li><a href="../classes/lavaca.util.resolve.html">lavaca.util.resolve</a></li>
            
                <li><a href="../classes/lavaca.util.StringUtils.html">lavaca.util.StringUtils</a></li>
            
                <li><a href="../classes/lavaca.util.Translation.html">lavaca.util.Translation</a></li>
            
                <li><a href="../classes/lavaca.util.uuid.html">lavaca.util.uuid</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/components/jquery/test/unit/serialize.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
module(&quot;serialize&quot;, { teardown: moduleTeardown });

test(&quot;jQuery.param()&quot;, function() {
	expect(22);

	var params, settings;

	equal( !( jQuery.ajaxSettings &amp;&amp; jQuery.ajaxSettings.traditional ), true, &quot;traditional flag, falsy by default&quot; );

	params = {&quot;foo&quot;:&quot;bar&quot;, &quot;baz&quot;:42, &quot;quux&quot;:&quot;All your base are belong to us&quot;};
	equal( jQuery.param(params), &quot;foo=bar&amp;baz=42&amp;quux=All+your+base+are+belong+to+us&quot;, &quot;simple&quot; );

	params = {&quot;string&quot;:&quot;foo&quot;,&quot;null&quot;:null,&quot;undefined&quot;:undefined};
	equal( jQuery.param(params), &quot;string=foo&amp;null=&amp;undefined=&quot;, &quot;handle nulls and undefineds properly&quot; );

	params = {&quot;someName&quot;: [1, 2, 3], &quot;regularThing&quot;: &quot;blah&quot; };
	equal( jQuery.param(params), &quot;someName%5B%5D=1&amp;someName%5B%5D=2&amp;someName%5B%5D=3&amp;regularThing=blah&quot;, &quot;with array&quot; );

	params = {&quot;foo&quot;: [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]};
	equal( jQuery.param(params), &quot;foo%5B%5D=a&amp;foo%5B%5D=b&amp;foo%5B%5D=c&quot;, &quot;with array of strings&quot; );

	params = {&quot;foo&quot;: [&quot;baz&quot;, 42, &quot;All your base are belong to us&quot;] };
	equal( jQuery.param(params), &quot;foo%5B%5D=baz&amp;foo%5B%5D=42&amp;foo%5B%5D=All+your+base+are+belong+to+us&quot;, &quot;more array&quot; );

	params = {&quot;foo&quot;: { &quot;bar&quot;: &quot;baz&quot;, &quot;beep&quot;: 42, &quot;quux&quot;: &quot;All your base are belong to us&quot; } };
	equal( jQuery.param(params), &quot;foo%5Bbar%5D=baz&amp;foo%5Bbeep%5D=42&amp;foo%5Bquux%5D=All+your+base+are+belong+to+us&quot;, &quot;even more arrays&quot; );

	params = { a:[1,2], b:{ c:3, d:[4,5], e:{ x:[6], y:7, z:[8,9] }, f:true, g:false, h:undefined }, i:[10,11], j:true, k:false, l:[undefined,0], m:&quot;cowboy hat?&quot; };
	equal( decodeURIComponent( jQuery.param(params) ), &quot;a[]=1&amp;a[]=2&amp;b[c]=3&amp;b[d][]=4&amp;b[d][]=5&amp;b[e][x][]=6&amp;b[e][y]=7&amp;b[e][z][]=8&amp;b[e][z][]=9&amp;b[f]=true&amp;b[g]=false&amp;b[h]=&amp;i[]=10&amp;i[]=11&amp;j=true&amp;k=false&amp;l[]=&amp;l[]=0&amp;m=cowboy+hat?&quot;, &quot;huge structure&quot; );

	params = { &quot;a&quot;: [ 0, [ 1, 2 ], [ 3, [ 4, 5 ], [ 6 ] ], { &quot;b&quot;: [ 7, [ 8, 9 ], [ { &quot;c&quot;: 10, &quot;d&quot;: 11 } ], [ [ 12 ] ], [ [ [ 13 ] ] ], { &quot;e&quot;: { &quot;f&quot;: { &quot;g&quot;: [ 14, [ 15 ] ] } } }, 16 ] }, 17 ] };
	equal( decodeURIComponent( jQuery.param(params) ), &quot;a[]=0&amp;a[1][]=1&amp;a[1][]=2&amp;a[2][]=3&amp;a[2][1][]=4&amp;a[2][1][]=5&amp;a[2][2][]=6&amp;a[3][b][]=7&amp;a[3][b][1][]=8&amp;a[3][b][1][]=9&amp;a[3][b][2][0][c]=10&amp;a[3][b][2][0][d]=11&amp;a[3][b][3][0][]=12&amp;a[3][b][4][0][0][]=13&amp;a[3][b][5][e][f][g][]=14&amp;a[3][b][5][e][f][g][1][]=15&amp;a[3][b][]=16&amp;a[]=17&quot;, &quot;nested arrays&quot; );

	params = { &quot;a&quot;:[1,2], &quot;b&quot;:{ &quot;c&quot;:3, &quot;d&quot;:[4,5], &quot;e&quot;:{ &quot;x&quot;:[6], &quot;y&quot;:7, &quot;z&quot;:[8,9] }, &quot;f&quot;:true, &quot;g&quot;:false, &quot;h&quot;:undefined }, &quot;i&quot;:[10,11], &quot;j&quot;:true, &quot;k&quot;:false, &quot;l&quot;:[undefined,0], &quot;m&quot;:&quot;cowboy hat?&quot; };
	equal( jQuery.param(params,true), &quot;a=1&amp;a=2&amp;b=%5Bobject+Object%5D&amp;i=10&amp;i=11&amp;j=true&amp;k=false&amp;l=&amp;l=0&amp;m=cowboy+hat%3F&quot;, &quot;huge structure, forced traditional&quot; );

	equal( decodeURIComponent( jQuery.param({ &quot;a&quot;: [1,2,3], &quot;b[]&quot;: [4,5,6], &quot;c[d]&quot;: [7,8,9], &quot;e&quot;: { &quot;f&quot;: [10], &quot;g&quot;: [11,12], &quot;h&quot;: 13 } }) ), &quot;a[]=1&amp;a[]=2&amp;a[]=3&amp;b[]=4&amp;b[]=5&amp;b[]=6&amp;c[d][]=7&amp;c[d][]=8&amp;c[d][]=9&amp;e[f][]=10&amp;e[g][]=11&amp;e[g][]=12&amp;e[h]=13&quot;, &quot;Make sure params are not double-encoded.&quot; );

	// #7945
	equal( jQuery.param({&quot;jquery&quot;: &quot;1.4.2&quot;}), &quot;jquery=1.4.2&quot;, &quot;Check that object with a jQuery property get serialized correctly&quot; );

	settings = { traditional: true };

	if ( jQuery.ajaxSettings ) {
		jQuery.ajaxSetup( settings );
	} else {
		jQuery.ajaxSettings = settings;
	}

	params = {&quot;foo&quot;:&quot;bar&quot;, &quot;baz&quot;:42, &quot;quux&quot;:&quot;All your base are belong to us&quot;};
	equal( jQuery.param(params), &quot;foo=bar&amp;baz=42&amp;quux=All+your+base+are+belong+to+us&quot;, &quot;simple&quot; );

	params = {&quot;someName&quot;: [1, 2, 3], &quot;regularThing&quot;: &quot;blah&quot; };
	equal( jQuery.param(params), &quot;someName=1&amp;someName=2&amp;someName=3&amp;regularThing=blah&quot;, &quot;with array&quot; );

	params = {&quot;foo&quot;: [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]};
	equal( jQuery.param(params), &quot;foo=a&amp;foo=b&amp;foo=c&quot;, &quot;with array of strings&quot; );

	params = {&quot;foo[]&quot;:[&quot;baz&quot;, 42, &quot;All your base are belong to us&quot;]};
	equal( jQuery.param(params), &quot;foo%5B%5D=baz&amp;foo%5B%5D=42&amp;foo%5B%5D=All+your+base+are+belong+to+us&quot;, &quot;more array&quot; );

	params = {&quot;foo[bar]&quot;:&quot;baz&quot;, &quot;foo[beep]&quot;:42, &quot;foo[quux]&quot;:&quot;All your base are belong to us&quot;};
	equal( jQuery.param(params), &quot;foo%5Bbar%5D=baz&amp;foo%5Bbeep%5D=42&amp;foo%5Bquux%5D=All+your+base+are+belong+to+us&quot;, &quot;even more arrays&quot; );

	params = { a:[1,2], b:{ c:3, d:[4,5], e:{ x:[6], y:7, z:[8,9] }, f:true, g:false, h:undefined }, i:[10,11], j:true, k:false, l:[undefined,0], m:&quot;cowboy hat?&quot; };
	equal( jQuery.param(params), &quot;a=1&amp;a=2&amp;b=%5Bobject+Object%5D&amp;i=10&amp;i=11&amp;j=true&amp;k=false&amp;l=&amp;l=0&amp;m=cowboy+hat%3F&quot;, &quot;huge structure&quot; );

	params = { &quot;a&quot;: [ 0, [ 1, 2 ], [ 3, [ 4, 5 ], [ 6 ] ], { &quot;b&quot;: [ 7, [ 8, 9 ], [ { &quot;c&quot;: 10, d: 11 } ], [ [ 12 ] ], [ [ [ 13 ] ] ], { &quot;e&quot;: { &quot;f&quot;: { &quot;g&quot;: [ 14, [ 15 ] ] } } }, 16 ] }, 17 ] };
	equal( jQuery.param(params), &quot;a=0&amp;a=1%2C2&amp;a=3%2C4%2C5%2C6&amp;a=%5Bobject+Object%5D&amp;a=17&quot;, &quot;nested arrays (not possible when jQuery.param.traditional == true)&quot; );

	params = { a:[1,2], b:{ c:3, d:[4,5], e:{ x:[6], y:7, z:[8,9] }, f:true, g:false, h:undefined }, i:[10,11], j:true, k:false, l:[undefined,0], m:&quot;cowboy hat?&quot; };
	equal( decodeURIComponent( jQuery.param(params,false) ), &quot;a[]=1&amp;a[]=2&amp;b[c]=3&amp;b[d][]=4&amp;b[d][]=5&amp;b[e][x][]=6&amp;b[e][y]=7&amp;b[e][z][]=8&amp;b[e][z][]=9&amp;b[f]=true&amp;b[g]=false&amp;b[h]=&amp;i[]=10&amp;i[]=11&amp;j=true&amp;k=false&amp;l[]=&amp;l[]=0&amp;m=cowboy+hat?&quot;, &quot;huge structure, forced not traditional&quot; );

	params = { &quot;param1&quot;: null };
	equal( jQuery.param(params,false), &quot;param1=&quot;, &quot;Make sure that null params aren&#x27;t traversed.&quot; );

	params = {&quot;test&quot;: {&quot;length&quot;: 3, &quot;foo&quot;: &quot;bar&quot;} };
	equal( jQuery.param( params, false ), &quot;test%5Blength%5D=3&amp;test%5Bfoo%5D=bar&quot;, &quot;Sub-object with a length property&quot; );

	if ( jQuery.ajaxSettings === settings ) {
		delete jQuery.ajaxSettings;
	} else {
		jQuery.ajaxSetup({ traditional: false });
	}
});

test(&quot;jQuery.param() Constructed prop values&quot;, function() {
	expect( 4 );

	/** @constructor */
	function Record() {
		this[&quot;prop&quot;] = &quot;val&quot;;
	}

	var MyString = String,
			MyNumber = Number,
			params = { &quot;test&quot;: new MyString(&quot;foo&quot;) };

	equal( jQuery.param( params, false ), &quot;test=foo&quot;, &quot;Do not mistake new String() for a plain object&quot; );

	params = { &quot;test&quot;: new MyNumber(5) };
	equal( jQuery.param( params, false ), &quot;test=5&quot;, &quot;Do not mistake new Number() for a plain object&quot; );

	params = { &quot;test&quot;: new Date() };
	ok( jQuery.param( params, false ), &quot;(Non empty string returned) Do not mistake new Date() for a plain object&quot; );

	// should allow non-native constructed objects
	params = { &quot;test&quot;: new Record() };
	equal( jQuery.param( params, false ), jQuery.param({ &quot;test&quot;: { &quot;prop&quot;: &quot;val&quot; } }), &quot;Allow non-native constructed objects&quot; );
});

test(&quot;serialize()&quot;, function() {
	expect(5);

	// Add html5 elements only for serialize because selector can&#x27;t yet find them on non-html5 browsers
	jQuery(&quot;#search&quot;).after(
		&quot;&lt;input type=&#x27;email&#x27; id=&#x27;html5email&#x27; name=&#x27;email&#x27; value=&#x27;dave@jquery.com&#x27; /&gt;&quot; +
		&quot;&lt;input type=&#x27;number&#x27; id=&#x27;html5number&#x27; name=&#x27;number&#x27; value=&#x27;43&#x27; /&gt;&quot; +
		&quot;&lt;input type=&#x27;file&#x27; name=&#x27;fileupload&#x27; /&gt;&quot;
	);

	equal( jQuery(&quot;#form&quot;).serialize(),
		&quot;action=Test&amp;radio2=on&amp;check=on&amp;hidden=&amp;foo%5Bbar%5D=&amp;name=name&amp;search=search&amp;email=dave%40jquery.com&amp;number=43&amp;select1=&amp;select2=3&amp;select3=1&amp;select3=2&amp;select5=3&quot;,
		&quot;Check form serialization as query string&quot;);

	equal( jQuery(&quot;input,select,textarea,button&quot;, &quot;#form&quot;).serialize(),
		&quot;action=Test&amp;radio2=on&amp;check=on&amp;hidden=&amp;foo%5Bbar%5D=&amp;name=name&amp;search=search&amp;email=dave%40jquery.com&amp;number=43&amp;select1=&amp;select2=3&amp;select3=1&amp;select3=2&amp;select5=3&quot;,
		&quot;Check input serialization as query string&quot;);

	equal( jQuery(&quot;#testForm&quot;).serialize(),
		&quot;T3=%3F%0D%0AZ&amp;H1=x&amp;H2=&amp;PWD=&amp;T1=&amp;T2=YES&amp;My+Name=me&amp;S1=abc&amp;S3=YES&amp;S4=&quot;,
		&quot;Check form serialization as query string&quot;);

	equal( jQuery(&quot;input,select,textarea,button&quot;, &quot;#testForm&quot;).serialize(),
		&quot;T3=%3F%0D%0AZ&amp;H1=x&amp;H2=&amp;PWD=&amp;T1=&amp;T2=YES&amp;My+Name=me&amp;S1=abc&amp;S3=YES&amp;S4=&quot;,
		&quot;Check input serialization as query string&quot;);

	equal( jQuery(&quot;#form, #testForm&quot;).serialize(),
		&quot;action=Test&amp;radio2=on&amp;check=on&amp;hidden=&amp;foo%5Bbar%5D=&amp;name=name&amp;search=search&amp;email=dave%40jquery.com&amp;number=43&amp;select1=&amp;select2=3&amp;select3=1&amp;select3=2&amp;select5=3&amp;T3=%3F%0D%0AZ&amp;H1=x&amp;H2=&amp;PWD=&amp;T1=&amp;T2=YES&amp;My+Name=me&amp;S1=abc&amp;S3=YES&amp;S4=&quot;,
		&quot;Multiple form serialization as query string&quot;);

	/* Temporarily disabled. Opera 10 has problems with form serialization.
	equal( jQuery(&quot;#form, #testForm :input&quot;).serialize(),
		&quot;action=Test&amp;radio2=on&amp;check=on&amp;hidden=&amp;foo%5Bbar%5D=&amp;name=name&amp;search=search&amp;email=dave%40jquery.com&amp;number=43&amp;select1=&amp;select2=3&amp;select3=1&amp;select3=2&amp;T3=%3F%0D%0AZ&amp;H1=x&amp;H2=&amp;PWD=&amp;T1=&amp;T2=YES&amp;My+Name=me&amp;S1=abc&amp;S3=YES&amp;S4=&quot;,
		&quot;Mixed form/input serialization as query string&quot;);
	*/
	jQuery(&quot;#html5email, #html5number&quot;).remove();
});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
