<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/components/jquery/test/data/testrunner.js - lavaca</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="lavaca"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 2.3.2</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/lavaca.env.Device.html">lavaca.env.Device</a></li>
            
                <li><a href="../classes/lavaca.events.EventDispatcher.html">lavaca.events.EventDispatcher</a></li>
            
                <li><a href="../classes/lavaca.fx.Animation.html">lavaca.fx.Animation</a></li>
            
                <li><a href="../classes/lavaca.fx.Spring.html">lavaca.fx.Spring</a></li>
            
                <li><a href="../classes/lavaca.fx.Transform.html">lavaca.fx.Transform</a></li>
            
                <li><a href="../classes/lavaca.fx.Transition.html">lavaca.fx.Transition</a></li>
            
                <li><a href="../classes/lavaca.mvc.Application.html">lavaca.mvc.Application</a></li>
            
                <li><a href="../classes/lavaca.mvc.AttributeEvent.html">lavaca.mvc.AttributeEvent</a></li>
            
                <li><a href="../classes/lavaca.mvc.Collection.html">lavaca.mvc.Collection</a></li>
            
                <li><a href="../classes/lavaca.mvc.Controller.html">lavaca.mvc.Controller</a></li>
            
                <li><a href="../classes/lavaca.mvc.ItemEvent.html">lavaca.mvc.ItemEvent</a></li>
            
                <li><a href="../classes/lavaca.mvc.Model.html">lavaca.mvc.Model</a></li>
            
                <li><a href="../classes/lavaca.mvc.Route.html">lavaca.mvc.Route</a></li>
            
                <li><a href="../classes/lavaca.mvc.Router.html">lavaca.mvc.Router</a></li>
            
                <li><a href="../classes/lavaca.mvc.View.html">lavaca.mvc.View</a></li>
            
                <li><a href="../classes/lavaca.mvc.ViewManager.html">lavaca.mvc.ViewManager</a></li>
            
                <li><a href="../classes/lavaca.net.Connectivity.html">lavaca.net.Connectivity</a></li>
            
                <li><a href="../classes/lavaca.net.History.html">lavaca.net.History</a></li>
            
                <li><a href="../classes/lavaca.storage.LocalStore.html">lavaca.storage.LocalStore</a></li>
            
                <li><a href="../classes/lavaca.storage.Store.html">lavaca.storage.Store</a></li>
            
                <li><a href="../classes/lavaca.ui.DustTemplate.html">lavaca.ui.DustTemplate</a></li>
            
                <li><a href="../classes/lavaca.ui.Form.html">lavaca.ui.Form</a></li>
            
                <li><a href="../classes/lavaca.ui.LoadingIndicator.html">lavaca.ui.LoadingIndicator</a></li>
            
                <li><a href="../classes/lavaca.ui.Template.html">lavaca.ui.Template</a></li>
            
                <li><a href="../classes/lavaca.ui.Widget.html">lavaca.ui.Widget</a></li>
            
                <li><a href="../classes/lavaca.util.ArrayUtils.html">lavaca.util.ArrayUtils</a></li>
            
                <li><a href="../classes/lavaca.util.Cache.html">lavaca.util.Cache</a></li>
            
                <li><a href="../classes/lavaca.util.Config.html">lavaca.util.Config</a></li>
            
                <li><a href="../classes/lavaca.util.DateUtils.html">lavaca.util.DateUtils</a></li>
            
                <li><a href="../classes/lavaca.util.Disposable.html">lavaca.util.Disposable</a></li>
            
                <li><a href="../classes/lavaca.util.extend.html">lavaca.util.extend</a></li>
            
                <li><a href="../classes/lavaca.util.Map.html">lavaca.util.Map</a></li>
            
                <li><a href="../classes/lavaca.util.Promise.html">lavaca.util.Promise</a></li>
            
                <li><a href="../classes/lavaca.util.resolve.html">lavaca.util.resolve</a></li>
            
                <li><a href="../classes/lavaca.util.StringUtils.html">lavaca.util.StringUtils</a></li>
            
                <li><a href="../classes/lavaca.util.Translation.html">lavaca.util.Translation</a></li>
            
                <li><a href="../classes/lavaca.util.uuid.html">lavaca.util.uuid</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/components/jquery/test/data/testrunner.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * Allow the test suite to run with other libs or jQuery&#x27;s.
 */
jQuery.noConflict();

// For checking globals pollution despite auto-created globals in various environments
jQuery.each( [ jQuery.expando, &quot;getInterface&quot;, &quot;Packages&quot;, &quot;java&quot;, &quot;netscape&quot; ], function( i, name ) {
	window[ name ] = window[ name ];
});

// Expose Sizzle for Sizzle&#x27;s selector tests
// We remove Sizzle&#x27;s globalization in jQuery
var Sizzle = Sizzle || jQuery.find,

// Allow subprojects to test against their own fixtures
	qunitModule = QUnit.module,
	qunitTest = QUnit.test;

this.testSubproject = function( label, url, risTests ) {
	var sub, fixture, fixtureHTML,
		fixtureReplaced = false;

	// Don&#x27;t let subproject tests jump the gun
	QUnit.config.reorder = false;

	// Create module
	module( label );

	// Duckpunch QUnit
	// TODO restore parent fixture on teardown to support reordering
	module = QUnit.module = function( name ) {
		var args = arguments;

		// Remember subproject-scoped module name
		sub = name;

		// Override
		args[0] = label;
		return qunitModule.apply( this, args );
	};
	test = function( name ) {
		var args = arguments,
			i = args.length - 1;

		// Prepend subproject-scoped module name to test name
		args[0] = sub + &quot;: &quot; + name;

		// Find test function and wrap to require subproject fixture
		for ( ; i &gt;= 0; i-- ) {
			if ( originaljQuery.isFunction( args[i] ) ) {
				args[i] = requireFixture( args[i] );
				break;
			}
		}

		return qunitTest.apply( this, args );
	};

	// Load tests and fixture from subproject
	// Test order matters, so we must be synchronous and throw an error on load failure
	originaljQuery.ajax( url, {
		async: false,
		dataType: &quot;html&quot;,
		error: function( jqXHR, status ) {
			throw new Error( &quot;Could not load: &quot; + url + &quot; (&quot; + status + &quot;)&quot; );
		},
		success: function( data, status, jqXHR ) {
			var page = originaljQuery.parseHTML(
				// replace html/head with dummy elements so they are represented in the DOM
				( data || &quot;&quot; ).replace( /&lt;\/?((!DOCTYPE|html|head)\b.*?)&gt;/gi, &quot;[$1]&quot; ),
				document,
				true
			);

			if ( !page || !page.length ) {
				this.error( jqXHR, &quot;no data&quot; );
			}
			page = originaljQuery( page );

			// Include subproject tests
			page.filter(&quot;script[src]&quot;).add( page.find(&quot;script[src]&quot;) ).each(function() {
				var src = originaljQuery( this ).attr(&quot;src&quot;),
					html = &quot;&lt;script src=&#x27;&quot; + url + src + &quot;&#x27;&gt;&lt;/script&gt;&quot;;
				if ( risTests.test( src ) ) {
					if ( originaljQuery.isReady ) {
						originaljQuery(&quot;head&quot;).first().append( html );
					} else {
						document.write( html );
					}
				}
			});

			// Get the fixture, including content outside of #qunit-fixture
			fixture = page.find(&quot;[id=&#x27;qunit-fixture&#x27;]&quot;);
			fixtureHTML = fixture.html();
			fixture.empty();
			while ( fixture.length &amp;&amp; !fixture.prevAll(&quot;[id=&#x27;qunit&#x27;]&quot;).length ) {
				fixture = fixture.parent();
			}
			fixture = fixture.add( fixture.nextAll() );
		}
	});

	function requireFixture( fn ) {
		return function() {
			if ( !fixtureReplaced ) {
				// Make sure that we retrieved a fixture for the subproject
				if ( !fixture.length ) {
					ok( false, &quot;Found subproject fixture&quot; );
					return;
				}

				// Replace the current fixture, including content outside of #qunit-fixture
				var oldFixture = originaljQuery(&quot;#qunit-fixture&quot;);
				while ( oldFixture.length &amp;&amp; !oldFixture.prevAll(&quot;[id=&#x27;qunit&#x27;]&quot;).length ) {
					oldFixture = oldFixture.parent();
				}
				oldFixture.nextAll().remove();
				oldFixture.replaceWith( fixture );

				// WARNING: UNDOCUMENTED INTERFACE
				QUnit.config.fixture = fixtureHTML;
				QUnit.reset();
				if ( originaljQuery(&quot;#qunit-fixture&quot;).html() !== fixtureHTML ) {
					ok( false, &quot;Copied subproject fixture&quot; );
					return;
				}

				fixtureReplaced = true;
			}

			fn.apply( this, arguments );
		};
	}
};

// Register globals for cleanup and the cleanup code itself
// Explanation at http://perfectionkills.com/understanding-delete/#ie_bugs
this.Globals = (function() {
	var globals = {};
	return {
		register: function( name ) {
			globals[ name ] = true;
			jQuery.globalEval( &quot;var &quot; + name + &quot; = undefined;&quot; );
		},
		cleanup: function() {
			var name,
				current = globals;
			globals = {};
			for ( name in current ) {
				jQuery.globalEval( &quot;try { &quot; +
					&quot;delete &quot; + ( jQuery.support.deleteExpando ? &quot;window[&#x27;&quot; + name + &quot;&#x27;]&quot; : name ) +
				&quot;; } catch( x ) {}&quot; );
			}
		}
	};
})();

// Sandbox start for great justice
(function() {
	var oldStart = window.start;
	window.start = function() {
		oldStart();
	};
})();

/**
 * QUnit hooks
 */
(function() {
	// Store the old counts so that we only assert on tests that have actually leaked,
	// instead of asserting every time a test has leaked sometime in the past
	var oldCacheLength = 0,
		oldFragmentsLength = 0,
		oldActive = 0,

		expectedDataKeys = {},

		splice = [].splice,
		reset = QUnit.reset,
		ajaxSettings = jQuery.ajaxSettings;

	function keys(o) {
		var ret, key;
		if ( Object.keys ) {
			ret = Object.keys( o );
		} else {
			ret = [];
			for ( key in o ) {
				ret.push( key );
			}
		}
		ret.sort();
		return ret;
	}

	/**
	 * @param {jQuery|HTMLElement|Object|Array} elems Target (or array of targets) for jQuery.data.
	 * @param {string} key
	 */
	QUnit.expectJqData = function( elems, key ) {
		var i, elem, expando;

		// As of jQuery 2.0, there will be no &quot;cache&quot;-data is
		// stored and managed completely below the API surface
		if ( jQuery.cache ) {
			QUnit.current_testEnvironment.checkJqData = true;

			if ( elems.jquery &amp;&amp; elems.toArray ) {
				elems = elems.toArray();
			}
			if ( !jQuery.isArray( elems ) ) {
				elems = [ elems ];
			}

			for ( i = 0; i &lt; elems.length; i++ ) {
				elem = elems[i];

				// jQuery.data only stores data for nodes in jQuery.cache,
				// for other data targets the data is stored in the object itself,
				// in that case we can&#x27;t test that target for memory leaks.
				// But we don&#x27;t have to since in that case the data will/must will
				// be available as long as the object is not garbage collected by
				// the js engine, and when it is, the data will be removed with it.
				if ( !elem.nodeType ) {
					// Fixes false positives for dataTests(window), dataTests({}).
					continue;
				}

				expando = elem[ jQuery.expando ];

				if ( expando === undefined ) {
					// In this case the element exists fine, but
					// jQuery.data (or internal data) was never (in)directly
					// called.
					// Since this method was called it means some data was
					// expected to be found, but since there is nothing, fail early
					// (instead of in teardown).
					notStrictEqual( expando, undefined, &quot;Target for expectJqData must have an expando, for else there can be no data to expect.&quot; );
				} else {
					if ( expectedDataKeys[expando] ) {
						expectedDataKeys[expando].push( key );
					} else {
						expectedDataKeys[expando] = [ key ];
					}
				}
			}
		}

	};
	QUnit.config.urlConfig.push( {
		id: &quot;jqdata&quot;,
		label: &quot;Always check jQuery.data&quot;,
		tooltip: &quot;Trigger QUnit.expectJqData detection for all tests instead of just the ones that call it&quot;
	} );

	/**
	 * Ensures that tests have cleaned up properly after themselves. Should be passed as the
	 * teardown function on all modules&#x27; lifecycle object.
	 */
	this.moduleTeardown = function() {
		var i,
			expectedKeys, actualKeys,
			fragmentsLength = 0,
			cacheLength = 0;

		// Only look for jQuery data problems if this test actually
		// provided some information to compare against.
		if ( QUnit.urlParams.jqdata || this.checkJqData ) {
			for ( i in jQuery.cache ) {
				expectedKeys = expectedDataKeys[i];
				actualKeys = jQuery.cache[i] ? keys( jQuery.cache[i] ) : jQuery.cache[i];
				if ( !QUnit.equiv( expectedKeys, actualKeys ) ) {
					deepEqual( actualKeys, expectedKeys, &quot;Expected keys exist in jQuery.cache&quot; );
				}
				delete jQuery.cache[i];
				delete expectedDataKeys[i];
			}
			// In case it was removed from cache before (or never there in the first place)
			for ( i in expectedDataKeys ) {
				deepEqual( expectedDataKeys[i], undefined, &quot;No unexpected keys were left in jQuery.cache (#&quot; + i + &quot;)&quot; );
				delete expectedDataKeys[i];
			}
		}

		// Reset data register
		expectedDataKeys = {};

		// Check for (and clean up, if possible) incomplete animations/requests/etc.
		if ( jQuery.timers &amp;&amp; jQuery.timers.length !== 0 ) {
			equal( jQuery.timers.length, 0, &quot;No timers are still running&quot; );
			splice.call( jQuery.timers, 0, jQuery.timers.length );
			jQuery.fx.stop();
		}
		if ( jQuery.active !== undefined &amp;&amp; jQuery.active !== oldActive ) {
			equal( jQuery.active, oldActive, &quot;No AJAX requests are still active&quot; );
			if ( ajaxTest.abort ) {
				ajaxTest.abort(&quot;active requests&quot;);
			}
			oldActive = jQuery.active;
		}

		// Allow QUnit.reset to clean up any attached elements before checking for leaks
		QUnit.reset();

		for ( i in jQuery.cache ) {
			++cacheLength;
		}

		jQuery.fragments = {};

		for ( i in jQuery.fragments ) {
			++fragmentsLength;
		}

		// Because QUnit doesn&#x27;t have a mechanism for retrieving the number of expected assertions for a test,
		// if we unconditionally assert any of these, the test will fail with too many assertions :|
		if ( cacheLength !== oldCacheLength ) {
			equal( cacheLength, oldCacheLength, &quot;No unit tests leak memory in jQuery.cache&quot; );
			oldCacheLength = cacheLength;
		}
		if ( fragmentsLength !== oldFragmentsLength ) {
			equal( fragmentsLength, oldFragmentsLength, &quot;No unit tests leak memory in jQuery.fragments&quot; );
			oldFragmentsLength = fragmentsLength;
		}
	};

	QUnit.done(function() {
		// Remove our own fixtures outside #qunit-fixture
		jQuery(&quot;#qunit ~ *&quot;).remove();
	});

	// jQuery-specific QUnit.reset
	QUnit.reset = function() {

		// Ensure jQuery events and data on the fixture are properly removed
		jQuery(&quot;#qunit-fixture&quot;).empty();

		// Reset internal jQuery state
		jQuery.event.global = {};
		if ( ajaxSettings ) {
			jQuery.ajaxSettings = jQuery.extend( true, {}, ajaxSettings );
		} else {
			delete jQuery.ajaxSettings;
		}

		// Cleanup globals
		Globals.cleanup();

		// Let QUnit reset the fixture
		reset.apply( this, arguments );
	};
})();

/**
 * QUnit configuration
 */
// Max time for stop() and asyncTest() until it aborts test
// and start()&#x27;s the next test.
QUnit.config.testTimeout = 20 * 1000; // 20 seconds

// Enforce an &quot;expect&quot; argument or expect() call in all test bodies.
QUnit.config.requireExpects = true;

/**
 * Load the TestSwarm listener if swarmURL is in the address.
 */
(function() {
	var url = window.location.search;
	url = decodeURIComponent( url.slice( url.indexOf(&quot;swarmURL=&quot;) + &quot;swarmURL=&quot;.length ) );

	if ( !url || url.indexOf(&quot;http&quot;) !== 0 ) {
		return;
	}

	document.write(&quot;&lt;scr&quot; + &quot;ipt src=&#x27;http://swarm.jquery.org/js/inject.js?&quot; + (new Date()).getTime() + &quot;&#x27;&gt;&lt;/scr&quot; + &quot;ipt&gt;&quot;);
})();

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
